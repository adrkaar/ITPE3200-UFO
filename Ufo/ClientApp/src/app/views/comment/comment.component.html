<h1>Comments</h1>

<button class="btn btn-secondary" [routerLink]="['/addComment', observationId]" style="margin-bottom: 1rem;"> <mat-icon>add_comment</mat-icon> Add comment</button>

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Id</th>
            <th>Comment</th>
            <th>Observation id</th>
            <th>Like</th> 
            <th>Dislike</th> 
        </tr>
    </thead>
    <tbody *ngFor="let comment of allcomments ">
        <tr>
            <td>{{ comment.id }}</td>
            <td>{{ comment.text }}</td>
            <td>{{ comment.observationId }}</td>
            <td><mat-button (click)="upVote(comment.id)">{{ comment.upVote }}<mat-icon class="icon-primary">thumb_up</mat-icon></mat-button></td>
            <td><mat-button (click)="downVote(comment.id)">{{ comment.downVote }}<mat-icon class="icon-primary">thumb_down</mat-icon></mat-button></td>
            <td><button class="btn btn-danger" (click)="deleteComment(comment.id)">Delete</button></td>
        </tr>
    </tbody>
</table>

<form [formGroup]="CommentForm" #form="ngForm" (ngSubmit)="addComment()">
    <div class="form-group">
        <label for="comment">Comment</label>
        <input type="text" formControlName="comment" class="form-control" id="comment" name="comment" [(ngModel)]="newComment.text">
        <p *ngIf="this.CommentForm.controls.comment.status=='INVALID'">Comment cannot be empty, max 160 characters</p>
    </div>
    <button type="submit" class="btn btn-primary" [disabled]="!CommentForm.valid">Comment</button>
</form>